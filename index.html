<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="theme-color" content="#0b0b12" />
  <title>ScarlettVR Poker • Permanent Spine</title>

  <link rel="stylesheet" href="./css/style.css" />

  <!-- IMPORTANT: makes `import "three"` work on GitHub Pages -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
</head>

<body>
  <div id="hud" class="hud">
    <div class="hud__title">
      <div class="hud__brand">ScarlettVR Poker • Permanent Spine</div>
      <div class="hud__sub">Root spine is permanent • Only edit /js/scarlett1/*</div>
    </div>

    <div class="hud__row">
      <button id="btnEnterVR" class="btn">Enter VR</button>
      <button id="btnResetSpawn" class="btn">Reset Spawn</button>
      <button id="btnToggleHUD" class="btn">Hide HUD</button>
      <button id="btnTextPlus" class="btn">Text +</button>
      <button id="btnTextMinus" class="btn">Text -</button>
      <button id="btnPurge" class="btn btn--warn">Purge Cache</button>
      <button id="btnHardReload" class="btn btn--warn">Hard Reload</button>
    </div>

    <pre id="diag" class="hud__diag">(starting…)</pre>
  </div>

  <script type="module">
    const diagEl = document.getElementById('diag');
    const log = (s)=>{ diagEl.textContent += (diagEl.textContent.endsWith('\n')?'':'\n') + s; };

    diagEl.textContent = '';
    log('[boot] html loaded ✅');
    log('[boot] attempting to import ./index.js …');

    window.addEventListener('error', (e)=> log('[window.error] ' + (e.message || e.error || e)));
    window.addEventListener('unhandledrejection', (e)=> log('[unhandledrejection] ' + (e.reason?.message || e.reason || e)));

    import('./index.js')
      .then(()=> log('[boot] index.js imported ✅'))
      .catch((e)=>{
        log('[boot] index.js import FAILED ❌');
        log(String(e?.stack || e?.message || e));
      });
  </script>
</body>
</html>
