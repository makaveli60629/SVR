<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ScarlettVR Poker - Master Build 4.1</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

  <!-- A-Frame Core -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

  <!-- A-Frame Extras (movement-controls etc.) -->
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

  <!-- Super Hands (grab/pinch interactions) -->
  <script src="https://cdn.jsdelivr.net/npm/aframe-super-hands-component@5.0.2/dist/aframe-super-hands-component.min.js"></script>

  <style>
    #dev-hud {
      position: absolute; top: 10px; left: 10px; z-index: 1000;
      font-family: 'Courier New', monospace; color: #00FF00;
      background: rgba(0, 20, 0, 0.9); padding: 15px; border: 2px solid #00FF00;
      width: 260px; pointer-events: auto;
    }
    .hud-btn {
      display: block; width: 100%; background: #003300; color: #00FF00;
      border: 1px solid #00FF00; margin: 6px 0; padding: 10px; cursor: pointer;
      text-transform: uppercase; font-weight: bold; font-size: 11px;
    }
    .status-light { color: #00FFFF; font-size: 10px; margin-bottom: 5px; }
  </style>
</head>
<body>

  <!-- DEV HUD (PERMANENT - NEVER REMOVE) -->
  <div id="dev-hud">
    <div style="font-size: 14px; border-bottom: 1px solid #00FF00; margin-bottom: 5px;">SCARLETT_OS v4.1</div>
    <div class="status-light" id="sys-status">MODULES: LOADED</div>
    <div id="fps-counter">FPS: -- | XYZ: 0 0 0</div>
    <hr color="#004400" />
    <button class="hud-btn" onclick="window.ScarlettWorld.dealFlop()">üé¥ DEAL FLOP</button>
    <button class="hud-btn" onclick="window.ScarlettWorld.toggleStore()">üõí CASINO STORE</button>
    <button class="hud-btn" onclick="window.ScarlettWorld.spawnBot()">ü§ñ ADD BOT</button>
    <button class="hud-btn" style="color:#ff4444; border-color:#ff4444;" onclick="location.reload()">‚ò¢Ô∏è SYSTEM RESET</button>
  </div>

  <a-scene renderer="antialias: true; colorManagement: true; exposure: 1.5;" shadow="type: pcfsoft">
    <a-assets>
      <img id="wallTex" src="assets/textures/brick_wall.jpg" />
      <img id="casinoLogo" src="assets/textures/casino_art_2.png" />
    </a-assets>

    <!-- Bright sky for non-VR fallback -->
    <a-sky color="#87CEEB"></a-sky>

    <!-- Lighting: NEVER DARK -->
    <a-light type="ambient" intensity="1.2"></a-light>
    <a-light type="directional" position="-2 10 2" intensity="1.0" castShadow="true"></a-light>
    <a-light type="point" position="0 8 -15" intensity="2.5" distance="60" color="#fff"></a-light>

    <!-- Sealed Casino Box (floor + ceiling + back wall + neon) -->
    <a-entity id="world-root">
      <a-plane rotation="-90 0 0" width="60" height="60" color="#1a1a1a"></a-plane>
      <a-plane rotation="90 0 0" position="0 10 -15" width="60" height="60" color="#111"></a-plane>

      <a-box position="0 5 -30" width="60" height="10" depth="1" src="#wallTex" repeat="4 1">
        <a-image src="#casinoLogo" position="0 1 0.6" width="10" height="6"></a-image>

        <a-box position="0 4.9 0.6" width="60" height="0.3" depth="0.3"
               material="color: #A020F0; emissive: #A020F0; emissiveIntensity: 20"></a-box>
        <a-box position="0 -4.9 0.6" width="60" height="0.3" depth="0.3"
               material="color: #A020F0; emissive: #A020F0; emissiveIntensity: 20"></a-box>
      </a-box>

      <a-cylinder position="-29.5 5 -29.5" radius="0.4" height="10"
                  material="color: #A020F0; emissive: #A020F0; emissiveIntensity: 15"></a-cylinder>
      <a-cylinder position="29.5 5 -29.5" radius="0.4" height="10"
                  material="color: #A020F0; emissive: #A020F0; emissiveIntensity: 15"></a-cylinder>
    </a-entity>

    <!-- Poker Table Complex -->
    <a-entity id="poker-table-complex" position="0 0 -15">
      <a-text value="SCARLETT MAIN EVENT" position="0 3.5 0" align="center" width="10"
              color="#00FF00" material="emissive:#00FF00; emissiveIntensity:2"></a-text>

      <a-cylinder radius="4" height="1" color="#004d00">
        <a-ring rotation="-90 0 0" position="0 0.51 0" radius-inner="3.8" radius-outer="4"
                color="#A020F0" material="emissive:#A020F0; emissiveIntensity:5"></a-ring>
      </a-cylinder>

      <!-- Cards spawn here -->
      <a-entity id="community-cards" position="0 1.8 0"></a-entity>

      <!-- Bots spawn here -->
      <a-entity id="bot-anchor"></a-entity>
    </a-entity>

    <!-- Player Rig -->
    <a-entity id="rig" position="0 0 0" movement-controls="fly: false; speed: 0.3">
      <a-camera id="main-cam" look-controls wasd-controls position="0 1.6 0">
        <a-cursor color="#00FF00" fuse="false"></a-cursor>
        <a-text id="wallet-display" value="WALLET: $5,000" position="0.8 -0.5 -1" width="2" color="#00FFFF"></a-text>
      </a-camera>

      <!-- Hands: pinch + grab via super-hands.
           sphere-collider detects nearby .grabbable objects. -->
      <a-entity id="leftHand"
                hand-tracking-controls="hand: left;"
                super-hands
                sphere-collider="objects: .grabbable; radius: 0.06">
      </a-entity>

      <a-entity id="rightHand"
                hand-tracking-controls="hand: right;"
                super-hands
                sphere-collider="objects: .grabbable; radius: 0.06">
      </a-entity>
    </a-entity>
  </a-scene>

  <!-- Root bootstrap (kept tiny and permanent) -->
  <script src="index.js"></script>
</body>
</html>
